{"ast":null,"code":"var _jsxFileName = \"/media/renato/linux_data/src/report_writer/front/src/widgets/array_widget.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport CompositeWidget from './composite_widget';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TextWidget(props) {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [qtdItems, setQtdItems] = useState(1);\n  const errors = props.errors || [];\n  const widgetMatrix = props.widget_props.widgets;\n\n  const updateFormValue = (index, field, value) => {\n    const newData = data;\n    newData[index][field] = value;\n    props.updateFormValue(props.field_name, newData);\n  };\n\n  const addItems = () => {\n    for (let i = 0; i < qtdItems; i++) {\n      const d = { ...props.widget_props.defaultItemData\n      };\n      setData(data => [...data, d]);\n    }\n  };\n\n  const removeAll = () => {\n    setData([]);\n  };\n\n  const removeAt = index => {\n    const newData = [...data.slice(0, index), ...data.slice(index + 1, data.length)];\n    props.updateFormValue(props.field_name, newData); // setData([\n    //   ...data.slice(0, index),\n    //   ...data.slice(index + 1, data.length)\n    // ]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"form-label\",\n      children: props.label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-1\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            className: \"form-control\",\n            value: qtdItems,\n            onChange: e => {\n              setQtdItems(parseInt(e.target.value));\n            },\n            id: props.field_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-11\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: addItems,\n            children: \"Adicionar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger ml-3\",\n            onClick: removeAll,\n            children: \"Remover Todos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), data.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"array-widget-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-row justify-content-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger btn-sm\",\n              onClick: () => {\n                removeAt(index);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-trash-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 93\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CompositeWidget, {\n            widgetMatrix: widgetMatrix,\n            errors: errors[index],\n            data: item,\n            updateFormValue: (field, value) => {\n              updateFormValue(index, field, value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TextWidget, \"1tpjOMj74aSL8Ia7A0HPmMff0Hs=\");\n\n_c = TextWidget;\nexport default TextWidget;\n\nvar _c;\n\n$RefreshReg$(_c, \"TextWidget\");","map":{"version":3,"names":["React","useState","CompositeWidget","TextWidget","props","data","setData","qtdItems","setQtdItems","errors","widgetMatrix","widget_props","widgets","updateFormValue","index","field","value","newData","field_name","addItems","i","d","defaultItemData","removeAll","removeAt","slice","length","label","e","parseInt","target","map","item"],"sources":["/media/renato/linux_data/src/report_writer/front/src/widgets/array_widget.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { DataType, ErrorsType, WidgetMatrixType } from '../types/custom_types';\nimport CompositeWidget from './composite_widget';\n\ntype Props = {\n  widget_props: any,\n  data: string,\n  field_name: string,\n  errors: Array<ErrorsType>,\n  label: string,\n  updateFormValue: (field: string, value: any) => void\n}\n\nfunction TextWidget(props: Props) {\n\n  const [data, setData] = useState<Array<DataType>>([]);\n\n  const [qtdItems, setQtdItems] = useState<number>(1);\n\n  const errors: Array<ErrorsType> = props.errors || [];\n\n  const widgetMatrix: WidgetMatrixType = props.widget_props.widgets;\n\n  const updateFormValue = (index: number, field: string, value: any) => {\n    const newData = data;\n    newData[index][field] = value;\n    props.updateFormValue(props.field_name, newData);\n  }\n\n  const addItems = () => {\n    for (let i = 0; i < qtdItems; i++) {\n      const d = { ...props.widget_props.defaultItemData };\n      setData(data => [...data, d]);\n    }\n  }\n\n  const removeAll = () => {\n    setData([]);\n  }\n\n  const removeAt = (index: number) => {\n    const newData = [\n      ...data.slice(0, index),\n      ...data.slice(index + 1, data.length)\n    ];\n    props.updateFormValue(props.field_name, newData);\n    // setData([\n    //   ...data.slice(0, index),\n    //   ...data.slice(index + 1, data.length)\n    // ]);\n  }\n\n  return (\n    <div>\n      <label className=\"form-label\">{props.label}</label>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-1\">\n            <input\n              type=\"number\"\n              min=\"1\"\n              className=\"form-control\"\n              value={qtdItems}\n              onChange={(e) => { setQtdItems(parseInt(e.target.value)) }}\n              id={props.field_name}\n            />\n\n\n          </div>\n          <div className=\"col-11\">\n            <button className=\"btn btn-secondary\" onClick={addItems}>Adicionar</button>\n            <button className=\"btn btn-danger ml-3\" onClick={removeAll}>Remover Todos</button>\n          </div>\n\n        </div>\n        {data.map((item, index) => {\n          return (\n            <div className='array-widget-item'>\n              <div className='d-flex flex-row justify-content-end'>\n                <button className=\"btn btn-danger btn-sm\" onClick={() => {removeAt(index)}}><i className=\"fas fa-trash-alt\"></i></button>\n              </div>\n              <CompositeWidget\n                widgetMatrix={widgetMatrix}\n                errors={errors[index]}\n                data={item}\n                updateFormValue={(field: string, value: any) => {\n                  updateFormValue(index, field, value);\n                }} />\n            </div>\n\n          );\n        })}\n      </div>\n    </div >\n  );\n}\n\nexport default TextWidget;"],"mappings":"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"},"metadata":{},"sourceType":"module"}